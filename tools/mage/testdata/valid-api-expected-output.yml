AWSTemplateFormatVersion: 2010-09-09
Transform: AWS::Serverless-2016-10-31
Description: Template with two embedded api bodies
Resources:
  FirstApi:
    Type: AWS::Serverless::Api
    Properties:
      DefinitionBody:
        consumes:
          - application/json
        definitions:
          ComplianceStatus:
            type: object
        info:
          title: panther-first-api
          version: 1.0.0
        parameters:
          policyId:
            description: URL-encoded panther policy ID
            in: query
            maxLength: 200
            name: policyId
            required: true
            type: string
        paths:
          /status:
            get:
              operationId: GetStatus
              parameters:
                - $ref: '#/parameters/policyId'
              responses:
                '200':
                  description: OK
                  schema:
                    $ref: '#/definitions/ComplianceStatus'
              security:
                - sigv4: []
              x-amazon-apigateway-integration:
                httpMethod: POST
                passthroughBehavior: never
                type: aws_proxy
                uri:
                  Fn::Sub: arn:aws:apigateway:${AWS::Region}:lambda:path/2015-03-31/functions/arn:aws:lambda:${AWS::Region}:${AWS::AccountId}:function:panther-test-api/invocations
              x-amazon-apigateway-request-validator: validate-all
        produces:
          - application/json
        schemes:
          - https
        securityDefinitions:
          sigv4:
            in: header
            name: Authorization
            type: apiKey
            x-amazon-apigateway-authtype: awsSigv4
        swagger: '2.0'
        x-amazon-apigateway-request-validators:
          validate-all:
            validateRequestBody: true
            validateRequestParameters: true
      Name: first-api
